(function(){function r(r,e,t){return{label:r,requires:e,parts:t}}function e(r,e){return n(r,e,!0)}function t(r){return n("codes",r,!0)}function n(r,e,t){return{label:r,parser:e,skip:t}}function i(r){return a(r,3)}function a(r,e){return{index:r,length:e}}function s(){return o(0)}function o(r){return{index:r}}function u(r){return d("blockSize",r)}function c(r){return d("height",r)}function f(r){return d("width",r)}function d(r,e){return{label:r,parser:e}}var l={enumerable:!1,configurable:!0,writable:!1},p=this,h=p.Object.defineProperty,g=function(r){var e=new Uint8Array(r),t=new m(e);this.raw=t.parse(rZ),this.raw.hasImages=!1;for(var n=0;n<this.raw.frames.length;n++)if(this.raw.frames[n].image){this.raw.hasImages=!0;break}},$=g.prototype,m=function(r){this.stream=new v(r),this.output={}},y=m.prototype,v=function(r){this.data=r,this.pos=0},B=v.prototype,b=function(){return this.data[this.pos++]},_=function(){return this.data[this.pos]},x=function(r){for(var e=Array(r),t=0;r>t;t++)e[t]=this.readByte();return e},w=function(r){for(var e=Array(r),t=0;r>t;t++)e[t]=this.data[this.pos+t];return e},k=function(r){for(var e="",t=0;r>t;t++)e+=String.fromCharCode(this.readByte());return e},z=function(){for(var r=[],e=this.readByte(),t=7;t>=0;t--)r.push(!!(e&1<<t));return r},S=function(r){var e=this.readBytes(2);return r?(e[1]<<8)+e[0]:(e[0]<<8)+e[1]},C=function(r){return this.parseParts(this.output,r),this.output},I=function(r,e){for(var t=0;t<e.length;t++){var n=e[t];this.parsePart(r,n)}},U=function(r,e){var t,n=e.label;if(!e.requires||e.requires(this.stream,this.output,r)){if(e.loop){for(var i=[];e.loop(this.stream);){var a={};this.parseParts(a,e.parts),i.push(a)}r[n]=i}else e.parts?(t={},this.parseParts(t,e.parts),r[n]=t):e.parser?(t=e.parser(this.stream,this.output,r),e.skip||(r[n]=t)):e.bits&&(r[n]=this.parseBits(e.bits))}},P=function(r){var e={},t=this.stream.readBitArray();for(var n in r){var i,a=r[n];e[n]=a.length?(i=t.slice(a.index,a.index+a.length)).reduce(function(r,e){return 2*r+e},0):t[a.index]}return e},q=function(r){for(var e=[],t=r.readByte();0!==t;t=r.readByte())e=e.concat(r.readBytes(t));return e},F=function(r){var e=r.peekBytes(2);return 33===e[0]&&249===e[1]},A=function(r){return r.readBytes(2)},G=function(r){return r.readBytes(2)},T=function(r){return r.readBytes(2)},j=function(r){return r.readBytes(2)},D=function(r){return r.readByte()},O=function(r){return r.readByte()},R=function(r){return r.readByte()},E=function(r){return r.readByte()},H=function(r){return r.readByte()},J=function(r){return r.readByte()},K=function(r){return r.readByte()},L=function(r){return r.readByte()},M=function(r){return r.readByte()},N=function(r){return r.readUnsigned(!0)},Q=function(r){return r.readUnsigned(!0)},V=function(r){return r.readUnsigned(!0)},W=function(r){return r.readUnsigned(!0)},X=function(r){return r.readUnsigned(!0)},Y=function(r){return r.readUnsigned(!0)},Z=function(r){return r.readUnsigned(!0)},rr=function(r){return 44===r.peekByte()},re=function(r,e,t){return t.descriptor.lct.exists},rt=function(r,e,t){return Math.pow(2,t.descriptor.lct.size+1)},rn=function(r,e,t,n){for(var i=r(e,t,n),a=Array(i),s=0;i>s;s++)a[s]=e.readBytes(3);return a},ri=function(r,e,t){return rn.call(this,rg,r,e,t)},ra=function(r,e,t){return rn.call(this,rt,r,e,t)},rs=function(r){var e=r.peekBytes(2);return 33===e[0]&&1===e[1]},ro=function(r,e,t){return r.readBytes(t.text.blockSize)},ru=function(r,e,t){var n=r.peekBytes(2);return 33===n[0]&&255===n[1]},rc=function(r,e,t){return r.readString(t.blockSize)},rf=function(r,e,t){var n=r.peekBytes(2);return 33===n[0]&&254===n[1]},rd=function(r){var e=r.peekByte();return 33===e||44===e},rl=function(r){return r.readString(3)},rp=function(r){return r.readString(3)},rh=function(r,e){return e.lsd.gct.exists},rg=function(r,e){return Math.pow(2,e.lsd.gct.size+1)},r$=function(r,e){if(r>=this.raw.frames.length)return null;var t=this.raw.frames[r];if(t.image){var n=t.image.descriptor.width*t.image.descriptor.height,i=function r(e,t,n){var i,a,s,o,u,c,f,d,l,p,h,g,$,m,y,v,B=n,b=Array(n),_=Array(4096),x=Array(4096),w=Array(4097);for(u=(a=1<<(g=e))+1,i=a+2,f=-1,s=(1<<(o=g+1))-1,l=0;a>l;l++)_[l]=0,x[l]=l;for(h=d=count=$=m=v=y=0,p=0;B>p;){if(0===m){if(o>d){h+=t[y]<<d,d+=8,y++;continue}if(l=h&s,h>>=o,d-=o,l>i||l==u)break;if(l==a){s=(1<<(o=g+1))-1,i=a+2,f=-1;continue}if(-1==f){w[m++]=x[l],f=l,$=l;continue}for(c=l,l==i&&(w[m++]=$,l=f);l>a;)w[m++]=x[l],l=_[l];$=255&x[l],w[m++]=$,4096>i&&(_[i]=f,x[i]=$,0==(++i&s)&&4096>i&&(o++,s+=i)),f=c}m--,b[v++]=w[m],p++}for(p=v;B>p;p++)b[p]=0;return b}(t.image.data.minCodeSize,t.image.data.blocks,n);t.image.descriptor.lct.interlaced&&(i=function r(e,t){for(var n=Array(e.length),i=e.length/t,a=[0,4,2,1],s=[8,8,4,2],o=0,u=0;4>u;u++)for(var c=a[u];i>c;c+=s[u])(function(r,i){var a=e.slice(i*t,(i+1)*t);n.splice.apply(n,[r*t,t].concat(a))})(c,o),o++;return n}(i,t.image.descriptor.width));var a={pixels:i,dims:{top:t.image.descriptor.top,left:t.image.descriptor.left,width:t.image.descriptor.width,height:t.image.descriptor.height}};return a.colorTable=t.image.descriptor.lct&&t.image.descriptor.lct.exists?t.image.lct:this.raw.gct,t.gce&&(a.delay=10*(t.gce.delay||10),a.disposalType=t.gce.extras.disposal,t.gce.extras.transparentColorGiven&&(a.transparentIndex=t.gce.transparentColorIndex)),e&&(a.patch=function r(e){for(var t=e.pixels.length,n=new Uint8ClampedArray(4*t),i=0;t>i;i++){var a=4*i,s=e.pixels[i],o=e.colorTable[s];n[a]=o[0],n[a+1]=o[1],n[a+2]=o[2],n[a+3]=s!==e.transparentIndex?255:0}return n}(a)),a}return null},rm=function(r){for(var e=[],t=0;t<this.raw.frames.length;t++)this.raw.frames[t].image&&e.push(this.decompressFrame(t,r));return e};l.value="a",h(v,"name",l),B.readByte=b,B.peekByte=_,B.readBytes=x,B.peekBytes=w,B.readString=k,B.readBitArray=z,B.readUnsigned=S,l.value="a",h(m,"name",l),y.parse=C,y.parseParts=I,y.parsePart=U,y.parseBits=P;var ry=d("signature",rl),rv=d("version",rp),rB=f(N),rb=c(Q),r_=s(),r0=i(1),rx=o(4),rw=i(5),rk=d("backgroundColorIndex",D),r1=d("pixelAspectRatio",O),r2=t(A),rz=d("byteSize",R),rS=i(0),rC=i(3),rI=o(6),r3=o(7),rU=d("delay",V),rP=d("transparentColorIndex",E),r7=e("terminator",H),rq=r("gce",F,[r2,rz,{label:"extras",bits:{future:rS,disposal:rC,userInput:rI,transparentColorGiven:r3}},rU,rP,r7]),r4=t(G),r6=u(J),rF=d("id",rc),rA=d("blocks",q),rG=r("application",ru,[r4,r6,rF,rA]),rT=t(T),r5=r("comment",rf,[rT,rA]),rj=e("code",K),rD=d("left",W),rO=d("top",X),rR=f(Y),rE=c(Z),rH=s(),rJ=o(1),rK=o(2),rL=a(3,2),rM=i(5),rN=d("minCodeSize",L),rQ=r("image",rr,[rj,{label:"descriptor",parts:[rD,rO,rR,rE,{label:"lct",bits:{exists:rH,interlaced:rJ,sort:rK,future:rL,size:rM}}]},{label:"lct",requires:re,parser:ra},{label:"data",parts:[rN,rA]}]),rV=t(j),rW=u(M),rX=d("preData",ro),rY=r("text",rs,[rV,rW,rX,rA]),rZ=[{label:"header",parts:[ry,rv]},{label:"lsd",parts:[rB,rb,{label:"gct",bits:{exists:r_,resolution:r0,sort:rx,size:rw}},rk,r1]},{label:"gct",requires:rh,parser:ri},{label:"frames",parts:[rq,rG,r5,rQ,rY],loop:rd}];$.decompressFrame=r$,$.decompressFrames=rm,p.GIF=g}).call(this);